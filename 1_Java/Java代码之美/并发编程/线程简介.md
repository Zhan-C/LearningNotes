# 什么是线程？

​		那么说到了线程这块，我们就要了解CPU了，还有进程以及线程，那么众所周知一个应用程序我们可以把他称之为一个进程，它运行在系统中，一个进程他肯定是要运行计算的，那么在运行计算的时候，这个最小的单位我们称之为线程，可以这样理解，一个进程有若干个线程，线程交由CPU进行处理，一个进程中的最小的可执行单位就是线程

# 线程，进程，并发，并行，串行的区别

​		CPU

​			早期CPU都是单核，现在例如4核8线程，他是计算我们的线程请求的核心

线程

​	线程是进程中最小的执行单位

进程

​	每一个应用程序我们称之为进程

并发

​	多个线程抢占一个CPU核

并行

​	多个线程分别在不同的CPU核中运行

串行

​	多个线程交替使用一个CPU核线程

​	什么是交替呢，例如4核8线程，那么在这个8个线程中有其中两个在一个CPU中执行，那么他们可能会交替执行，比如一个苹果你吃了吗一口，我吃一口，那么在我们吃苹果时，我们需要把手中的苹果递给另外一个人，这个递给他的过程中，就会产生上下文的切换，这点是对性能有所损耗的

# 指令重排序

​	在程序执行的时候，编译器和处理器有时会对指令，进行重新排序，重排序分为3种类型

​	1、编译器优化的重排序，编译器在不改变单线程程序语句的前提下，可以重新安排语句的执行顺序

​	2、指令级并行的重排序。现代处理器采用额指令级并行技术，来将多条指令重叠执行

​	3、内存系统的重排序，由于处理器使用缓存和读写缓冲区，这使得加载和存储操作看上去可能是在乱序执行

源码-------》编译器优化重排序------》指令级并行重排序-------》内存系统重排序-------》最终执行的指令重排序

# 顺序一致性

​	在我们的多线程操作数据时会产生顺序一致性的问题，也就是现在有3条线程去修改x的值，那么我们假设，

a线程，x=10,b线程:x=11，c线程:x=12，那么这三个操作都回去修改x的值，3条线程执行，去争抢cpu资源调度，本来应该a先执行，b再执行，c再执行，现在顺序乱掉了，a先执行然后执行c最后执行b，那么结果就会变为11，这样的话和我们的结果区别很大，所以我们要保证他的顺序一致性，很多的时候我们都是通过锁去进行操作

